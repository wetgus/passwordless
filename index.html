<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Management</title>
</head>
<body>
    <h1>Welcome to the Account Management Page</h1>

    <!-- Registration Dialogue -->
    <div id="registration-form" style="display: none;">
        <h2>Register</h2>
        <label for="email">Email:</label>
        <input type="email" id="register-email" required>
        <label for="pin">PIN:</label>
        <input type="password" id="register-pin" required>
        <button id="register-button">Register</button>
    </div>

    <!-- Login Dialogue -->
    <div id="login-form" style="display: none;">
        <h2>Login</h2>
        <label for="email">Email:</label>
        <input type="email" id="login-email" required>
        <label for="pin">PIN:</label>
        <input type="password" id="login-pin" required>
        <button id="login-button">Login</button>
    </div>

    <!-- OTP Form for Device Enrollment -->
    <div id="otp-form" style="display: none;">
        <h2>OTP Verification</h2>
        <p>An OTP has been sent to your email. Please enter it to enroll your device.</p>
        <label for="otp">OTP:</label>
        <input type="text" id="otp-input" required>
        <button id="verify-otp-button">Verify OTP</button>
    </div>

    <!-- After Login Actions -->
    <div id="after-login-actions" style="display: none;">
        <h2>Account Management</h2>
        <button id="logout-button">Logout</button>
        <button id="delete-account-button">Delete Account</button>
    </div>

    <script src="registration.js"></script>
    <script src="login.js"></script>
    <script src="email.js"></script>
    <script src="otp.js"></script>
    <script src="logout.js"></script>
    <script src="deleteAccount.js"></script>

    <script>
        // Initial script to handle page rendering based on device state
        function checkEnrollmentStatus() {
            const enrolledDevice = localStorage.getItem('deviceToken');
            if (enrolledDevice) {
                document.getElementById('login-form').style.display = 'block';
            } else {
                document.getElementById('registration-form').style.display = 'block';
            }
        }

        checkEnrollmentStatus();  // Initial call to check device status
    </script>
</body>
</html>
